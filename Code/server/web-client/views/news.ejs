<!DOCTYPE html>
<html>
  <head>
    <title>News</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>

    <div id="upper-bar">
      <div class="link" id="one"><a href="/">Cattle</a></div>
      <div class="link" id="two"><a href="/shed">Shed</a></div>
      <div class="link" id="three"><a href="/location">Grazing</a></div>
      <div class="link" id="four"><a href="/news">News</a></div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h1>Trends & Statistics</h1>
    <br>
    <br>
    <div>
      <div class="chartLeft">
        <canvas id="tempChart"></canvas>
        <script>
        var xValues = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
        var temp = JSON.parse(`<%- JSON.stringify(temp) %>`);
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].annualTemp);
          }
        const barColors = ["red","white","blue","yellow","brown","purple","black", "turquoise", "pink", "orange", "beige", "green"];
  
        new Chart("tempChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Average Shed Temperature 2023 (in Celsius)"
            }
          }
        });
        </script>
      </div>
      <div class="chartRight">
        <canvas id="humChart" class="chart"></canvas>
        <script>
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].annualHum);
          }

        new Chart("humChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Average Shed Humidity 2023 (in %)"
            }
          }
        });
        </script> 
      </div>
      <div class="chartLeft">
        <canvas id="wQualChart"></canvas>
        <script>
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].wQuality);
          }

        new Chart("wQualChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Average Cattle Water Quality 2023 (in pH)"
            }
          }
        });
        </script> 
      </div>
      <div class="chartRight">
        <canvas id="wQuanChart"></canvas>
        <script>
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].wQuantity);
          }

        new Chart("wQuanChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Cattle Water Consumption 2023 (in liters)"
            }
          }
        });
        </script> 
      </div>
      <div class="chartLeft">
        <canvas id="ammChart"></canvas>
        <script>
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].annualAmm);
          }

        new Chart("ammChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Shed Ammonia Level (in ppm)"
            }
          }
        });
        </script> 
      </div>
      <div class="chartRight">
        <canvas id="grazingChart"></canvas>
        <script>
        var yValues = [];
          for(var i = 0; i < temp.length; i++){
            yValues.push(temp[i].daysGrazing);
          }

        new Chart("grazingChart", {
          type: "bar",
          data: {
            labels: xValues,
            datasets: [{
              backgroundColor: barColors,
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
            title: {
              display: true,
              text: "Grazing Activity (in days)"
            }
          }
        });
        </script> 
      </div>
    </div>  
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h1>Related News</h1>
    <br>
    <br>
    <div>
    <div id="text-part">
      <table>
          <tr>
            <td><b><%= newsItems[0].category %></b></td>
            <td><a href="https://www.met.ie/forecasts/national-forecast"><%= newsItems[0].url %></a></td>
          </tr>
          <tr>
            <td><b><%= newsItems[1].category %></b></td>
            <td><a href="https://www.ifa.ie/resources/smart-farming-farm-apps/"><%= newsItems[1].url %></a></td>
          </tr>
          <tr>
            <td><b><%= newsItems[2].category %></b></td>
            <td><a href="https://www.agriland.ie/"><%= newsItems[2].url %></a></td>
          </tr>
          <tr>
            <td><b><%= newsItems[3].category %></b></td>
            <td><a href="https://animallaw.ie/farm-animals/"><%= newsItems[3].url %></a></td>
          </tr>
          <tr>
            <td><b><%= newsItems[4].category %></b></td>
            <td><a href="https://www.cso.ie/en/releasesandpublications/ep/p-clsjp/cropsandlivestockprovisionaljune2022/#:~:text=Cattle%20Numbers-,The%20total%20cattle%20numbers%20were%20up%20by%2037%2C300%20(%2B0.5,by%2017%2C000%20(%2B2.4%25)."><%= newsItems[4].url %></a></td>
          </tr>
      </table>
    </div>
  </body>
</html>